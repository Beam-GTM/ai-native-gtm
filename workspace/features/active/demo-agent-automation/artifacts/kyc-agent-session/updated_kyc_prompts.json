{
  "document_validation_prompt": "**KYC Document Validation - Step 1**\n\nYou are processing a customer's KYC documents. Your task is to validate each document for completeness and authenticity.\n\n**INPUT DOCUMENTS:**\n- Government ID: {documents.government_id_document}\n- Proof of Address: {documents.address_document}\n- Additional Docs: {documents.additional_documents}\n\n**VALIDATION RULES:**\n1. **Document Clarity**: Is the document clearly readable and not blurry?\n2. **Information Completeness**: Are all required fields present and legible?\n3. **Authenticity Indicators**: Does the document show signs of tampering or forgery?\n4. **Date Validity**: Is the document current and not expired?\n\n**DECISION LOGIC:**\n- IF all documents are clear AND complete AND authentic AND current → PROCEED to identity verification\n- IF any document is unclear OR incomplete OR suspicious → FLAG for manual review with specific reason\n- IF documents are expired → REJECT with \"Document expiration\" reason\n\n**OUTPUT FORMAT:**\n```json\n{\n  \"validation_status\": \"approved|flagged|rejected\",\n  \"document_scores\": {\n    \"government_id\": \"pass|fail|flag\",\n    \"proof_of_address\": \"pass|fail|flag\",\n    \"additional_docs\": \"pass|fail|flag\"\n  },\n  \"flags\": [\"specific_issue_1\", \"specific_issue_2\"],\n  \"next_action\": \"proceed|manual_review|reject\"\n}\n```",
  
  "identity_verification_prompt": "**KYC Identity Verification - Step 2**\n\nYou are verifying a customer's identity using validated documents and external sources.\n\n**CUSTOMER INFORMATION:**\n- Full Name: {customer_data.customer_full_name}\n- Date of Birth: {customer_data.date_of_birth}\n- Address: {customer_data.customer_address}\n- Government ID Number: {customer_data.id_number}\n\n**DOCUMENT DATA (for verification):**\n- Driver's License Name: {documents.government_id_document.document_data.name}\n- Driver's License DOB: {documents.government_id_document.document_data.dob}\n- Driver's License Address: {documents.government_id_document.document_data.address}\n- Driver's License Number: {documents.government_id_document.document_data.license_number}\n\n**VERIFICATION SOURCES:**\n1. **Government Database**: Check official records\n2. **Credit Bureau**: Verify identity history\n3. **Watchlist Screening**: Check against sanctions/PEP lists\n\n**VERIFICATION RULES:**\n1. **Name Match**: Does the name match across all sources?\n2. **Address Verification**: Does the address match government records?\n3. **ID Validation**: Is the government ID valid and not reported stolen?\n4. **Watchlist Check**: Is the customer on any sanctions or PEP lists?\n5. **Document Data Consistency**: Do the extracted document data match the customer information?\n\n**DECISION LOGIC:**\n- IF all verifications PASS AND no watchlist matches → PROCEED to risk assessment\n- IF any verification FAILS → FLAG for manual review with specific failure reason\n- IF watchlist MATCH found → IMMEDIATE rejection with compliance reason\n- IF document data doesn't match customer info → FLAG for manual review\n\n**OUTPUT FORMAT:**\n```json\n{\n  \"verification_status\": \"verified|flagged|rejected\",\n  \"verification_results\": {\n    \"government_db\": \"pass|fail|error\",\n    \"credit_bureau\": \"pass|fail|error\",\n    \"watchlist_screening\": \"clear|match|error\",\n    \"document_consistency\": \"pass|fail|error\"\n  },\n  \"match_details\": \"specific_watchlist_match_if_any\",\n  \"consistency_issues\": [\"specific_inconsistency_if_any\"],\n  \"next_action\": \"proceed|manual_review|reject\"\n}\n```",
  
  "risk_assessment_prompt": "**KYC Risk Assessment - Step 3**\n\nYou are assessing the risk level of the customer based on verification results and customer profile.\n\n**INPUT DATA:**\n- Verification Status: {verification_status}\n- Customer Profile: {customer_data}\n- Document Quality: {document_quality}\n- Watchlist Status: {watchlist_status}\n\n**REQUIRED OUTPUT VARIABLES:**\nThe system needs these specific variables extracted:\n\n1. **Customer Occupation**: Extract from customer data or infer from profile\n2. **Document Quality Score**: Assess based on document validation results\n\n**RISK FACTORS:**\n\n**1. OCCUPATION RISK ASSESSMENT:**\n- **High Risk Occupations**: Politically exposed persons, cash-intensive businesses, high-value asset dealers\n- **Medium Risk Occupations**: Self-employed, new business owners, international workers\n- **Low Risk Occupations**: Salaried employees, established professionals, government workers\n\n**2. DOCUMENT QUALITY RISK:**\n- **Score 90-100**: Excellent quality, clear scans, all information legible\n- **Score 70-89**: Good quality, minor issues, mostly legible\n- **Score 50-69**: Fair quality, some blurriness or missing information\n- **Score 0-49**: Poor quality, significant issues, hard to read\n\n**3. OTHER RISK INDICATORS:**\n- PEP (Politically Exposed Person) status\n- High-risk country of residence\n- Unusual transaction patterns\n- Sanctions list matches\n- Age of documents\n- Document authenticity\n\n**RISK SCORING:**\n- 0-30: Low Risk\n- 31-70: Medium Risk\n- 71-100: High Risk\n\n**OUTPUT FORMAT:**\n```json\n{\n  \"customer_occupation\": \"extracted_or_inferred_occupation\",\n  \"document_quality_score\": 0-100,\n  \"risk_score\": 0-100,\n  \"risk_level\": \"low|medium|high\",\n  \"risk_factors\": [\"occupation_risk\", \"document_quality_risk\", \"other_factors\"],\n  \"occupation_risk_level\": \"low|medium|high\",\n  \"document_quality_risk_level\": \"low|medium|high\",\n  \"mitigation_required\": true|false,\n  \"next_action\": \"proceed|manual_review|reject\"\n}\n```",
  
  "compliance_decision_prompt": "**KYC Compliance Decision - Step 4**\n\nYou are making the final compliance decision based on all verification and risk assessment results.\n\n**INPUT DATA:**\n- Verification Status: {verification_status}\n- Risk Score: {risk_score}\n- Risk Level: {risk_level}\n- Document Quality: {document_quality}\n- Watchlist Status: {watchlist_status}\n\n**COMPLIANCE DECISION MATRIX:**\n1. **VERIFICATION STATUS = FAILED** → IMMEDIATE REJECTION\n2. **WATCHLIST MATCH = YES** → IMMEDIATE REJECTION\n3. **RISK LEVEL = HIGH** → MANUAL REVIEW REQUIRED\n4. **RISK LEVEL = MEDIUM** → APPROVED WITH ENHANCED MONITORING\n5. **RISK LEVEL = LOW** → APPROVED WITH STANDARD MONITORING\n\n**ENHANCED MONITORING TRIGGERS:**\n- Transaction amount > $10,000\n- Unusual geographic transactions\n- Frequent large cash transactions\n- Changes to customer profile\n\n**OUTPUT FORMAT:**\n```json\n{\n  \"compliance_decision\": \"approved|rejected|manual_review\",\n  \"monitoring_level\": \"standard|enhanced|manual\",\n  \"approval_conditions\": [\"condition1\", \"condition2\"],\n  \"next_steps\": \"account_activation|manual_review|rejection_letter\",\n  \"compliance_notes\": \"specific_reasoning_for_decision\"\n}\n```"
}
